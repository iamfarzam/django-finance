{% extends "base/app.html" %}
{% load i18n %}

{% block title %}{% if object %}{% translate "Edit Account" %}{% else %}{% translate "New Account" %}{% endif %}{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <div class="mb-8">
        <h1 class="text-2xl font-bold text-gray-900">
            {% if object %}{% translate "Edit Account" %}{% else %}{% translate "Create New Account" %}{% endif %}
        </h1>
    </div>

    <div class="bg-white shadow-sm rounded-lg border border-gray-200">
        <form method="post" class="p-6 space-y-6">
            {% csrf_token %}

            {% if form.non_field_errors %}
            <div class="rounded-md bg-danger-50 p-4">
                {% for error in form.non_field_errors %}
                <p class="text-sm text-danger-600">{{ error }}</p>
                {% endfor %}
            </div>
            {% endif %}

            <div>
                <label for="id_name" class="block text-sm font-medium text-gray-700">{% translate "Account Name" %}</label>
                <input type="text" name="name" id="id_name" value="{{ form.name.value|default:'' }}" required
                       class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"
                       placeholder="{% translate "e.g., Main Checking" %}">
                {% if form.name.errors %}
                <p class="mt-1 text-sm text-danger-600">{{ form.name.errors.0 }}</p>
                {% endif %}
            </div>

            {% if not object %}
            <div>
                <label for="id_account_type" class="block text-sm font-medium text-gray-700">{% translate "Account Type" %}</label>
                <select name="account_type" id="id_account_type" required
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm">
                    <option value="">{% translate "Select type..." %}</option>
                    <option value="checking" {% if form.account_type.value == 'checking' %}selected{% endif %}>{% translate "Checking" %}</option>
                    <option value="savings" {% if form.account_type.value == 'savings' %}selected{% endif %}>{% translate "Savings" %}</option>
                    <option value="credit_card" {% if form.account_type.value == 'credit_card' %}selected{% endif %}>{% translate "Credit Card" %}</option>
                    <option value="cash" {% if form.account_type.value == 'cash' %}selected{% endif %}>{% translate "Cash" %}</option>
                    <option value="investment" {% if form.account_type.value == 'investment' %}selected{% endif %}>{% translate "Investment" %}</option>
                    <option value="loan" {% if form.account_type.value == 'loan' %}selected{% endif %}>{% translate "Loan" %}</option>
                </select>
            </div>

            <div>
                <label for="id_currency_code" class="block text-sm font-medium text-gray-700">{% translate "Currency" %}</label>
                <select name="currency_code" id="id_currency_code" required
                        class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm">
                    <option value="USD" {% if form.currency_code.value == 'USD' %}selected{% endif %}>USD - {% translate "US Dollar" %}</option>
                    <option value="EUR" {% if form.currency_code.value == 'EUR' %}selected{% endif %}>EUR - {% translate "Euro" %}</option>
                    <option value="GBP" {% if form.currency_code.value == 'GBP' %}selected{% endif %}>GBP - {% translate "British Pound" %}</option>
                    <option value="INR" {% if form.currency_code.value == 'INR' %}selected{% endif %}>INR - {% translate "Indian Rupee" %}</option>
                </select>
            </div>
            {% endif %}

            <div>
                <label for="id_description" class="block text-sm font-medium text-gray-700">{% translate "Description (optional)" %}</label>
                <textarea name="description" id="id_description" rows="3"
                          class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm"
                          placeholder="{% translate "Notes about this account..." %}">{{ form.description.value|default:'' }}</textarea>
            </div>

            <div class="flex justify-end space-x-3 pt-4 border-t border-gray-200">
                <a href="{% url 'web:accounts_list' %}" class="px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                    {% translate "Cancel" %}
                </a>
                <button type="submit" class="px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700">
                    {% if object %}{% translate "Save Changes" %}{% else %}{% translate "Create Account" %}{% endif %}
                </button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
